#!/bin/bash

echo type the website you want to display: ; read website

echo stopping service
bash <(wget --no-check-certificate -qO- https://raw.githubusercontent.com/aristosv/BeatBox-Digital-Signage/main/function_service_stop)

echo clearing framebuffer
bash <(wget --no-check-certificate -qO- https://raw.githubusercontent.com/aristosv/BeatBox-Digital-Signage/main/function_service_framebuffer)

echo creating browser service
bash <(wget --no-check-certificate -qO- https://raw.githubusercontent.com/aristosv/BeatBox-Digital-Signage/main/function_service_browser)

echo reloading services
bash <(wget --no-check-certificate -qO- https://raw.githubusercontent.com/aristosv/BeatBox-Digital-Signage/main/function_service_reload)

echo removing existing directory
sudo rm -rf /root/.config/midori

echo creating browser directory
sudo mkdir -p /root/.config/midori

echo creating browser configuration
sudo bash -c "cat >> /root/.config/midori/config" << EOL
[settings]
last-window-width=$(fbset -s | awk '/geometry/ { print $2 }')
last-window-height=$(fbset -s | awk '/geometry/ { print $3 }')
EOL

echo starting browser service
sudo systemctl start browser.service

echo enabling browser service
sudo systemctl enable browser.service > /dev/null 2>&1
