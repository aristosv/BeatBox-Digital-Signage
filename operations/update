#!/bin/bash

{
# variables
installdir=/home/pi/digitalsignage

echo updating digitalsignage
cd $installdir

echo pulling updates from repository
git reset --hard > /dev/null 2>&1
git pull origin main > /dev/null 2>&1

echo setting permissions
chmod -R +x $installdir/signage_*
chmod -R +x $installdir/functions/function_*

echo updating olivetin
$installdir/functions/function_olivetin

echo updating filebrowser
$installdir/functions/function_filebrowser

} | sudo tee /var/log/digitalsignage_update_$(date +'%d_%m_%Y_%I_%M').log
